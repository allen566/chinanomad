<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸­å›½æ¸¸æ°‘ | å‘ç°æœ€ä½³è¿œç¨‹å·¥ä½œåŸå¸‚</title>
    <style>
        /* ç®€æ´ä¸­æ€§è‰²è°ƒï¼šè“ç»¿ä¸»è‰² */
        :root { --primary: #4CAF50; --secondary: #2196F3; --bg: #f5f5f5; --text: #333; }
        body { font-family: 'PingFang SC', sans-serif; margin: 0; padding: 0; background: var(--bg); color: var(--text); }
        header { background: var(--primary); color: white; text-align: center; padding: 1rem; }
        .search-bar { width: 100%; padding: 0.5rem; box-sizing: border-box; margin-bottom: 1rem; }
        .filters { display: flex; flex-wrap: wrap; gap: 0.5rem; padding: 1rem; background: white; border-radius: 8px; margin: 1rem; }
        .filter-item { flex: 1; min-width: 120px; }
        .filter-item label { display: block; font-size: 0.9rem; }
        .filter-item input[type="range"] { width: 100%; }
        .map-placeholder { height: 200px; background: #eee; display: flex; align-items: center; justify-content: center; margin: 1rem; border: 1px solid #ddd; }
        .cities { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem; padding: 1rem; }
        .city-card { background: white; border-radius: 8px; padding: 1rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .city-score { font-size: 1.5rem; font-weight: bold; color: var(--secondary); }
        .tags { display: flex; gap: 0.5rem; margin-top: 0.5rem; }
        .tag { background: var(--primary); color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.8rem; }
        .calculator { padding: 1rem; background: white; margin: 1rem; border-radius: 8px; }
        @media (max-width: 768px) { .filters { flex-direction: column; } .cities { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <header>
        <h1>ğŸš€ ä¸­å›½æ¸¸æ°‘æŒ‡å—</h1>
        <p>é«˜é“æ—¶ä»£çš„æœ€ä½³è¿œç¨‹å·¥ä½œåŸå¸‚ | æˆæœ¬<3000å…ƒ/æœˆï¼ŒWiFiæ»¡æ ¼ï¼Œç©ºæ°”æ¸…æ–°</p>
        <input type="text" class="search-bar" placeholder="æœç´¢åŸå¸‚ï¼Œå¦‚ 'æˆéƒ½ å’–å•¡'" id="searchInput">
    </header>

    <!-- è¿‡æ»¤é¢æ¿ï¼šæˆæœ¬ã€å®‰å…¨ã€æ°”å€™ -->
    <section class="filters">
        <div class="filter-item">
            <label>ğŸ’° æœˆæˆæœ¬ (å…ƒ): <span id="costValue">2000</span></label>
            <input type="range" min="1000" max="5000" value="2000" id="costSlider" onchange="updateFilters()">
        </div>
        <div class="filter-item">
            <label>ğŸ›¡ï¸ å®‰å…¨åˆ†: <span id="safetyValue">4</span>/5</label>
            <input type="range" min="1" max="5" value="4" id="safetySlider" onchange="updateFilters()">
        </div>
        <div class="filter-item">
            <label>ğŸŒ¡ï¸ æ°”å€™ (â„ƒ): <span id="climateValue">20</span></label>
            <input type="range" min="0" max="30" value="20" id="climateSlider" onchange="updateFilters()">
        </div>
        <button onclick="aiRecommend()" style="background: var(--secondary); color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px;">ğŸ¤– AIæ¨èTop5</button>
    </section>

    <!-- åœ°å›¾å ä½ï¼šåæœŸç”¨é«˜å¾·API -->
    <section class="map-placeholder">
        ğŸ—ºï¸ ä¸­å›½äº’åŠ¨åœ°å›¾ï¼ˆç‚¹å‡»åŸå¸‚æŸ¥çœ‹è¯¦æƒ…ï¼‰ - é›†æˆé«˜å¾·API
    </section>

    <!-- Top10åŸå¸‚æ¦œå• -->
    <section class="cities" id="citiesList">
        <!-- JSåŠ¨æ€ç”Ÿæˆ -->
    </section>

    <!-- æˆæœ¬è®¡ç®—å™¨ -->
    <section class="calculator">
        <h3>ğŸ§® æœˆæˆæœ¬æ¨¡æ‹Ÿ</h3>
        <label>ä½å®¿: <input type="number" id="rent" value="1500"> å…ƒ</label><br>
        <label>é¤é¥®: <input type="number" id="food" value="800"> å…ƒ</label><br>
        <label>äº¤é€š: <input type="number" id="transport" value="200"> å…ƒ</label><br>
        <button onclick="calculateCost()">è®¡ç®—æ€»æˆæœ¬</button>
        <p id="totalCost">æ€»è®¡: 2500 å…ƒ/æœˆ</p>
    </section>

    <script>
        // ç¤ºä¾‹æ•°æ®ï¼š50ä¸ªä¸­å›½åŸå¸‚ï¼Œè¯„åˆ†/æˆæœ¬ç­‰ï¼ˆæ‰‹åŠ¨æ›´æ–°æˆ–Airtableå¯¼å…¥ï¼‰
        const citiesData = [
            { name: 'æˆéƒ½', score: 4.5, cost: 2500, safety: 4, climate: 18, tags: ['ğŸš„é«˜é“åœˆ', 'â˜•å’–å•¡å¤š', 'ğŸŒ«ï¸AQI<50'] },
            { name: 'ä¸Šæµ·', score: 4.2, cost: 4500, safety: 5, climate: 22, tags: ['ğŸ“¡5Gæ»¡é€Ÿ', 'ğŸ å…±äº«åŠå…¬<50å…ƒ/å¤©'] },
            { name: 'å¦é—¨', score: 4.7, cost: 2800, safety: 4, climate: 25, tags: ['ğŸ–ï¸æµ·æ»¨', 'ğŸ‘¨â€ğŸ’»æ¸¸æ°‘ç¤¾åŒºæ´»è·ƒ'] },
            { name: 'æ­å·', score: 4.3, cost: 3200, safety: 4, climate: 20, tags: ['ğŸ’³å¾®ä¿¡å‹å¥½', 'ğŸŒ³å…¬å›­å¤š'] },
            { name: 'é‡åº†', score: 4.0, cost: 2200, safety: 3, climate: 24, tags: ['ğŸ”¥ç«é”…å¤©å ‚', 'ğŸš€åˆ›ä¸šæ°›å›´'] },
            // æ·»åŠ æ›´å¤š... ç›®æ ‡50+
        ];

        // æ¸²æŸ“åŸå¸‚åˆ—è¡¨
        function renderCities(filteredCities) {
            const container = document.getElementById('citiesList');
            container.innerHTML = filteredCities.map(city => `
                <div class="city-card">
                    <h3>${city.name} ${city.score > 4 ? 'â­â­â­â­â­' : 'â­â­â­â­'}</h3>
                    <div class="city-score">${city.score}/5</div>
                    <p>æœˆæˆæœ¬: ${city.cost}å…ƒ | å®‰å…¨: ${city.safety}/5 | æ°”å€™: ${city.climate}â„ƒ</p>
                    <div class="tags">${city.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}</div>
                </div>
            `).join('');
        }

        // è¿‡æ»¤é€»è¾‘
        function updateFilters() {
            const costMax = document.getElementById('costSlider').value;
            const safetyMin = document.getElementById('safetySlider').value;
            const climate = document.getElementById('climateSlider').value;
            document.getElementById('costValue').textContent = costMax;
            document.getElementById('safetyValue').textContent = safetyMin;
            document.getElementById('climateValue').textContent = climate;

            const filtered = citiesData.filter(city => 
                city.cost <= costMax && city.safety >= safetyMin && Math.abs(city.climate - climate) <= 5
            );
            renderCities(filtered);
        }

        // AIæ¨èæ¨¡æ‹Ÿï¼ˆåæœŸCozeé›†æˆï¼‰
        function aiRecommend() {
            const query = document.getElementById('searchInput').value || 'é¢„ç®—ä½ çˆ±å’–å•¡';
            alert(`åŸºäº"${query}"ï¼Œæ¨èï¼šæˆéƒ½(å’–å•¡å¤šï¼Œé«˜é“ä¾¿æ·)ã€æ­å·(å…¬å›­å®œäºº)ã€‚è¯¦ç»†æŠ¥å‘Šéœ€ä¼šå‘˜è§£é”ï¼`);
            // å®é™…ï¼šè°ƒç”¨Coze APIç”Ÿæˆä¸ªæ€§åŒ–è¡Œç¨‹
        }

        // æœç´¢
        document.getElementById('searchInput').addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            const filtered = citiesData.filter(city => city.name.toLowerCase().includes(term));
            renderCities(filtered);
        });

        // æˆæœ¬è®¡ç®—
        function calculateCost() {
            const total = parseInt(document.getElementById('rent').value) + 
                          parseInt(document.getElementById('food').value) + 
                          parseInt(document.getElementById('transport').value);
            document.getElementById('totalCost').textContent = `æ€»è®¡: ${total} å…ƒ/æœˆ`;
        }

        // åˆå§‹åŒ–
        renderCities(citiesData);
        updateFilters();
    </script>
</body>
</html>